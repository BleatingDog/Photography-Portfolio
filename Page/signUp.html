<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Photo Impact</title>
    <link rel="stylesheet" href="../style/header.css">
    <link rel="stylesheet" href="../style/footer.css">
    <link rel="stylesheet" href="../style/style.css">
    <link rel="stylesheet" href="../style/signUp.css">
    
</head>
<body class="signUp-page">
    <div id="header-container"></div>
    <div class="signUp-main-container">
        <header class="signUp-header">
            <h2>Sign Up</h2>
        </header>
        <div class="container">
            <form>
                <label for="name">Name:</label>
                
                <input 
                id="name"
                type="text" 
                placeholder="Enter your name" 
                size="40"
                maxlength="50">
                
                <label for="lastName">Last name:</label>
                
                <input 
                id="lastName"
                type="text" 
                placeholder="Enter your last name" 
                size="40"
                maxlength="50">

                <label for="email">Email:</label>
                <input 
                id="email"
                type="email" 
                placeholder="email@gmail.com" 
                size="40">
                
                <label for="telephone">Telephone:</label>
                <input 
                id="telephone"
                type="tel" 
                placeholder="xxx-xxx-xxxx" 
                size="40">
                
                <label for="password">Password:</label>
                <input 
                id="password"
                type="password" 
                placeholder="**********" 
                size="40">
                <br>
                <br>
                <button type="button" class="submit-button" style="margin: auto; display: block;"onclick="signUp()">Sign up</button>
                <a href="../Page/login.html">or log in</a>
            </form>
        </div>
    </div>
    <div id="footer-container"></div>
    <script src="../js/loadHeader.js"></script>
    <script src="../js/loadFooter.js"></script>
    <script>
        // Load existing users from localStorage or initialize an empty object
        const users = JSON.parse(localStorage.getItem("users")) || {};

        function signUp() {
            const name = document.getElementById('name').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const telephone = document.getElementById('telephone').value.trim();
            const password = document.getElementById('password').value;

            if (!name || !lastName || !email || !telephone || !password) {
                alert("Please fill in all fields.");
                return;
            }

            // Get existing users from localStorage or start with empty array
            const users = JSON.parse(localStorage.getItem("users")) || [];
            console.log(Array.isArray(users));
            // Check if email already exists
            const existingUser = users.find(u => u.email === email);
            if (existingUser) {
                alert("This email is already registered in our database.");
                return;
            }

            // Add new user
            const newUser = {
                name,
                lastName,
                email,
                telephone,
                password
            };
            users.push(newUser);

            // Save back to localStorage
            localStorage.setItem("users", JSON.stringify(users));

            alert("User registered successfully!");

            // Clear form fields
            document.getElementById('name').value = "";
            document.getElementById('lastName').value = "";
            document.getElementById('email').value = "";
            document.getElementById('telephone').value = "";
            document.getElementById('password').value = "";

            console.log(users); // Debug
        }
    </script>

</body>
</html>